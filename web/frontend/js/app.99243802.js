(function(e){function t(t){for(var a,i,c=t[0],r=t[1],l=t[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var r=n[c];0!==s[r]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},s={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=r;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"05e7":function(e,t,n){"use strict";var a=n("1508"),s=n.n(a);s.a},1508:function(e,t,n){},"21bb":function(e,t,n){"use strict";var a=n("7a98"),s=n.n(a);s.a},"3d08":function(e,t,n){},5452:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}}),n("router-view")],1)},o=[],i=(n("5c0b"),n("2877")),c={},r=Object(i["a"])(c,s,o,!1,null,null,null),l=r.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e.loggedIn?e._e():n("login-box"),e.loggedIn?n("div",{staticClass:"chatbot-wrapper",class:{expanded:e.explainTabClicked&&e.explanations.length>0,"expanded-left":e.backgroundTabClicked}},[n("h3",{staticClass:"title"},[e._v("Hello, "+e._s(e.$store.state.nickName))]),n("span",{staticClass:"button explain",class:{disabled:!(e.explanations.length>0),expanded:e.explainTabClicked&&e.explanations.length>0},on:{click:function(t){return e.tabButtonClicked("explain")}}},[e._v("Explanation")]),n("span",{staticClass:"button background",class:{expanded:e.backgroundTabClicked},on:{click:function(t){return e.tabButtonClicked("background")}}},[e._v("Background")]),n("div",{staticClass:"message-panel"},e._l(this.$store.state.messages,(function(e,t){return n("message-box",{key:t,attrs:{message:e.text,type:e.from}})})),1),n("div",{staticClass:"user-message-wrapper"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],attrs:{id:"user-text"},domProps:{value:e.userMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.altKey?e.submitMessage(t):null},input:function(t){t.target.composing||(e.userMessage=t.target.value)}}}),n("div",{staticClass:"submit-control"},[n("span",{staticClass:"user-text-submit",on:{click:e.submitMessage}},[e._v("Send")]),n("label",{staticClass:"explain-checkbox-container"},[e._v("Explain\n          "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.explainChecked,expression:"explainChecked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.explainChecked)?e._i(e.explainChecked,null)>-1:e.explainChecked},on:{change:function(t){var n=e.explainChecked,a=t.target,s=!!a.checked;if(Array.isArray(n)){var o=null,i=e._i(n,o);a.checked?i<0&&(e.explainChecked=n.concat([o])):i>-1&&(e.explainChecked=n.slice(0,i).concat(n.slice(i+1)))}else e.explainChecked=s}}}),n("span",{staticClass:"checkmark"})])])])]):e._e(),e.loggedIn?n("div",{staticClass:"explanation-window",class:{expanded:e.explainTabClicked&&e.explanations.length>0}},[n("div",{staticClass:"background section"},[n("h2",{staticClass:"section-title"},[e._v("Background")]),e._l(e.background,(function(t,a){return n("accordion",{key:a,attrs:{title:t.rawName,body:e.setMessageGradient(t)}})}))],2),n("div",{staticClass:"history section"},[n("h2",[e._v("History")]),e._l(e.explanations,(function(t,a){return n("div",{key:a,staticClass:"utterance"},[a<e.explanations.length-1?n("div",{domProps:{innerHTML:e._s(e.setMessageGradient(t))}}):e._e()])}))],2),n("div",{staticClass:"prediction section"},[n("h2",[e._v("Prediction")]),n("div",{staticClass:"utterance"},[n("div",[e.explanations[e.explanations.length-1]?n("div",{domProps:{innerHTML:e._s(e.setMessageGradient(e.explanations[e.explanations.length-1]))}}):e._e()])])])]):e._e(),e.loggedIn?n("div",{staticClass:"background-window",class:{expanded:e.backgroundTabClicked}},e._l(e.backgroundText,(function(t,a){return n("accordion",{key:a,attrs:{title:e.formatEntityTitle(t),body:e.formatEntity(t)}})})),1):e._e()],1)},p=[],g=(n("ac6a"),n("28a5"),n("b54a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-box"},[n("label",{attrs:{for:"user-nick-name"}},[e._v("Please enter your nick name:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickName,expression:"nickName"}],attrs:{id:"user-nick-name"},domProps:{value:e.nickName},on:{input:function(t){t.target.composing||(e.nickName=t.target.value)}}}),n("span",{staticClass:"button",on:{click:e.logIn}},[e._v("Start")])])}),f=[],b={name:"LoginBox",data:function(){return{nickName:""}},methods:{logIn:function(){this.$store.commit("logIn"),this.$store.commit("setNickName",this.nickName)}}},h=b,k=(n("c609"),Object(i["a"])(h,g,f,!1,null,"f1d64250",null)),m=k.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-box",class:e.type},[n("div",{staticClass:"message"},[e._v(e._s(e.message))])])},x=[],y={name:"MessageBox",props:{message:String,type:String}},C=y,_=(n("d7d6"),Object(i["a"])(C,v,x,!1,null,"796a72a6",null)),w=_.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"accordion-title",on:{click:function(t){e.isVisible=!e.isVisible}}},[e._v(e._s(e.title))]),e.isVisible?n("div",{staticClass:"accordion-body"},[n("div",{domProps:{innerHTML:e._s(e.body)}})]):e._e()])},M=[],O={name:"Accordion",data:function(){return{isVisible:!1}},props:{title:String,body:String}},j=O,E=(n("05e7"),Object(i["a"])(j,T,M,!1,null,"f95fb1ce",null)),N=E.exports,P={name:"home",components:{LoginBox:m,MessageBox:w,Accordion:N},computed:{loggedIn:function(){return this.$store.state.isLoggedIn}},data:function(){return{userMessage:"",explainTabClicked:!1,backgroundTabClicked:!1,background:this.$store.state.background,backgroundText:this.$store.state.backgroundText,explanations:this.$store.state.explanations,backgroundShown:!1,backgroundContent:{},explainChecked:!1}},methods:{submitMessage:function(){console.log(this.userMessage.length),0!==this.userMessage.length&&(this.$store.commit("addMessage",{text:this.userMessage,from:"user"}),this.userMessage="",this.$store.dispatch("fetchMessages",{explain:this.explainChecked}),this.explainTabClicked=!1,this.backgroundTabClicked=!1)},formatEntityTitle:function(e){return"".concat(e.rawName," (").concat(e.type,")")},formatEntity:function(e){return"<span>".concat(e.text,'</div><br/><div>source: <a href="').concat(e.link,'" target="_blank">').concat(e.link,"</a></div><div>domains: ").concat(e.domains,"</div>")},setMessageGradient:function(e){var t={red:204,green:76,blue:88},n={red:79,green:76,blue:77};if(e.utterance){var a=e.utterance.split(""),s="<user>"===e.type?n:t;e.annotation.forEach((function(e){var t=e[0],n=e[0]+e[1]-1,o="rgba(".concat(s.red,",").concat(s.green,",").concat(s.blue,",").concat(.2+.8*e[2],")");a[t]='<span class="entity-name" style="background: '.concat(o,'">').concat(a[t]),a[n]="".concat(a[n],"</span>")}));var o="<user>"===e.type?"user":"bot",i=!1;0===e.annotation.length&&(i=!0);var c=i?"last":"";return'<div class="'.concat(o," ").concat(c,'">').concat(a.join(""),"</div>")}var r=e.text.split(""),l=t;return e.annotation.forEach((function(e){var t=e[0],n=e[0]+e[1]-1,a="rgba(".concat(l.red,",").concat(l.green,",").concat(l.blue,",").concat(.2+.8*e[2],")");r[t]='<span class="background-token" style="background: '.concat(a,'">').concat(r[t]),r[n]="".concat(r[n],"</span>")})),'<div class="background-text">'.concat(r.join(""),"</div>")},tabButtonClicked:function(e){"background"===e?(this.backgroundTabClicked=!this.backgroundTabClicked,this.explainTabClicked=!1):(this.explainTabClicked=!this.explainTabClicked,this.backgroundTabClicked=!1)}}},S=P,$=(n("21bb"),Object(i["a"])(S,d,p,!1,null,null,null)),B=$.exports;a["a"].use(u["a"]);var I=new u["a"]({routes:[{path:"/",name:"home",component:B}]}),A=(n("456d"),n("75fc")),L=n("2f62");a["a"].use(L["a"]);var H=new L["a"].Store({state:{isLoggedIn:!1,nickName:"",messages:[{text:"Welcome to the chatbot. You can ask some questions if you want. Here is an example: How many members has the catholic church?",from:"bot",isExcluded:!0}],explanations:[],background:[],backgroundText:[]},mutations:{logIn:function(e){e.isLoggedIn=!0},logOut:function(e){e.isLoggedIn=!1},setNickName:function(e,t){e.nickName=t},refreshMessages:function(e,t){var n;e.messages.length=0,(n=e.messages).push.apply(n,Object(A["a"])(t))},addMessage:function(e,t){e.messages.push(t)},refreshBackground:function(e,t){var n;e.background.length=0,(n=e.background).push.apply(n,Object(A["a"])(t))},refreshBackgroundText:function(e,t){var n;e.backgroundText.length=0,(n=e.backgroundText).push.apply(n,Object(A["a"])(t))},refreshExplanations:function(e,t){var n;e.explanations.length=0,(n=e.explanations).push.apply(n,Object(A["a"])(t))}},actions:{fetchMessages:function(e){var t=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{explain:!0},a=this.state.messages.filter((function(e){return!e.isExcluded})).map((function(e){return e.text})),s=this.state.messages.filter((function(e){return!e.isExcluded})).map((function(e){return"<".concat(e.from,">")})),o={utterances:a,explain:void 0===n.explain||n.explain,utterance_types:s},i="http://convqa.dfki.de/ask";fetch(i,{method:"POST",headers:{Accept:"application/json; charset=UTF-8"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.log(e);for(var n=[],a=[],s=[],o=[],i=0;i<e.utterances.length;i+=1)n.push({text:e.utterances[i],from:e.utterance_types[i].slice(1,e.utterance_types[i].length-1)});e.explain&&(Object.keys(e.explanation_annotations.background).forEach((function(t){a.push(Object.assign(e.background[t],{annotation:e.explanation_annotations.background[t]},{link:t},{text:e.background[t].text}))})),e.explanation_annotations.utterances.forEach((function(t,n){s.push({utterance:e.utterances[n],annotation:t,type:e.utterance_types[n]})}))),e.background&&Object.keys(e.background).forEach((function(t){o.push(Object.assign(e.background[t],{link:t}))})),t("refreshMessages",n),t("refreshBackground",a),t("refreshBackgroundText",o),t("refreshExplanations",s)})).catch((function(e){console.log(e)}))}}}),G=n("9483");Object(G["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["a"].config.productionTip=!1,new a["a"]({router:I,store:H,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("e332"),s=n.n(a);s.a},"7a98":function(e,t,n){},c609:function(e,t,n){"use strict";var a=n("5452"),s=n.n(a);s.a},d7d6:function(e,t,n){"use strict";var a=n("3d08"),s=n.n(a);s.a},e332:function(e,t,n){}});
//# sourceMappingURL=app.99243802.js.map