(function(e){function n(n){for(var a,i,c=n[0],r=n[1],l=n[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);u&&u(n);while(p.length)p.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],a=!0,c=1;c<t.length;c++){var r=t[c];0!==s[r]&&(a=!1)}a&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var a={},s={app:0},o=[];function i(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=a,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)i.d(t,a,function(n){return e[n]}.bind(null,a));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var u=r;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"05e7":function(e,n,t){"use strict";var a=t("1508"),s=t.n(a);s.a},1508:function(e,n,t){},"21bb":function(e,n,t){"use strict";var a=t("7a98"),s=t.n(a);s.a},"3d08":function(e,n,t){},5452:function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var a=t("2b0e"),s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}}),t("router-view")],1)},o=[],i=(t("5c0b"),t("2877")),c={},r=Object(i["a"])(c,s,o,!1,null,null,null),l=r.exports,u=t("8c4f"),d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"home"},[e.loggedIn?e._e():t("login-box"),e.loggedIn?t("div",{staticClass:"chatbot-wrapper",class:{expanded:e.explainTabClicked&&e.explainChecked,"expanded-left":e.backgroundTabClicked}},[t("h3",{staticClass:"title"},[e._v("Hello, "+e._s(e.$store.state.nickName))]),t("span",{staticClass:"button explain",class:{expanded:e.explainTabClicked&&e.explainChecked,disabled:!e.explainChecked},on:{click:function(n){return e.tabButtonClicked("explain")}}},[e._v("Explanation")]),t("span",{staticClass:"button background",class:{expanded:e.backgroundTabClicked},on:{click:function(n){return e.tabButtonClicked("background")}}},[e._v("Background")]),t("div",{staticClass:"message-panel"},e._l(this.$store.state.messages,(function(e,n){return t("message-box",{key:n,attrs:{message:e.text,type:e.from}})})),1),t("div",{staticClass:"user-message-wrapper"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],attrs:{id:"user-text"},domProps:{value:e.userMessage},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:n.altKey?e.submitMessage(n):null},input:function(n){n.target.composing||(e.userMessage=n.target.value)}}}),t("div",{staticClass:"submit-control"},[t("span",{staticClass:"user-text-submit",on:{click:e.submitMessage}},[e._v("Send")]),t("label",{staticClass:"explain-checkbox-container"},[e._v("Explain\n          "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.explainChecked,expression:"explainChecked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.explainChecked)?e._i(e.explainChecked,null)>-1:e.explainChecked},on:{change:function(n){var t=e.explainChecked,a=n.target,s=!!a.checked;if(Array.isArray(t)){var o=null,i=e._i(t,o);a.checked?i<0&&(e.explainChecked=t.concat([o])):i>-1&&(e.explainChecked=t.slice(0,i).concat(t.slice(i+1)))}else e.explainChecked=s}}}),t("span",{staticClass:"checkmark"})])])])]):e._e(),e.loggedIn?t("div",{staticClass:"explanation-window",class:{expanded:e.explainTabClicked&&e.explainChecked}},[t("div",{staticClass:"background section"},[t("h2",{staticClass:"section-title"},[e._v("Background")]),e._l(e.background,(function(n,a){return t("accordion",{key:a,attrs:{title:n.rawName,body:e.setMessageGradient(n)}})}))],2),t("div",{staticClass:"history section"},[t("h2",[e._v("History")]),e._l(e.explanations,(function(n,a){return t("div",{key:a,staticClass:"utterance"},[a<e.explanations.length-1?t("div",{domProps:{innerHTML:e._s(e.setMessageGradient(n))}}):e._e()])}))],2),t("div",{staticClass:"prediction section"},[t("h2",[e._v("Prediction")]),t("div",{staticClass:"utterance"},[t("div",[e.explanations[e.explanations.length-1]?t("div",{domProps:{innerHTML:e._s(e.setMessageGradient(e.explanations[e.explanations.length-1]))}}):e._e()])])])]):e._e(),e.loggedIn?t("div",{staticClass:"background-window",class:{expanded:e.backgroundTabClicked}},e._l(e.backgroundText,(function(e,n){return t("accordion",{key:n,attrs:{title:e.rawName,body:e.text}})})),1):e._e()],1)},p=[],g=(t("ac6a"),t("28a5"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"login-box"},[t("label",{attrs:{for:"user-nick-name"}},[e._v("Please enter your nick name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nickName,expression:"nickName"}],attrs:{id:"user-nick-name"},domProps:{value:e.nickName},on:{input:function(n){n.target.composing||(e.nickName=n.target.value)}}}),t("span",{staticClass:"button",on:{click:e.logIn}},[e._v("Start")])])}),f=[],b={name:"LoginBox",data:function(){return{nickName:""}},methods:{logIn:function(){this.$store.commit("logIn"),this.$store.commit("setNickName",this.nickName)}}},h=b,k=(t("c609"),Object(i["a"])(h,g,f,!1,null,"f1d64250",null)),v=k.exports,x=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"message-box",class:e.type},[t("div",{staticClass:"message"},[e._v(e._s(e.message))])])},m=[],y={name:"MessageBox",props:{message:String,type:String}},C=y,_=(t("d7d6"),Object(i["a"])(C,x,m,!1,null,"796a72a6",null)),w=_.exports,M=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("h4",{staticClass:"accordion-title",on:{click:function(n){e.isVisible=!e.isVisible}}},[e._v(e._s(e.title))]),e.isVisible?t("div",{staticClass:"accordion-body"},[t("div",{domProps:{innerHTML:e._s(e.body)}})]):e._e()])},T=[],O={name:"Accordion",data:function(){return{isVisible:!1}},props:{title:String,body:String}},j=O,N=(t("05e7"),Object(i["a"])(j,M,T,!1,null,"f95fb1ce",null)),E=N.exports,P={name:"home",components:{LoginBox:v,MessageBox:w,Accordion:E},computed:{loggedIn:function(){return this.$store.state.isLoggedIn}},data:function(){return{userMessage:"",explainTabClicked:!1,backgroundTabClicked:!1,background:this.$store.state.background,backgroundText:this.$store.state.backgroundText,explanations:this.$store.state.explanations,backgroundShown:!1,backgroundContent:{},explainChecked:!1}},methods:{submitMessage:function(){console.log(this.userMessage.length),0!==this.userMessage.length&&(this.$store.commit("addMessage",{text:this.userMessage,from:"user"}),this.userMessage="",this.$store.dispatch("fetchMessages",{explain:this.explainChecked}),this.explainTabClicked=!1,this.backgroundTabClicked=!1)},setMessageGradient:function(e){var n={red:204,green:76,blue:88},t={red:79,green:76,blue:77};if(e.utterance){var a=e.utterance.split(""),s="<user>"===e.type?t:n;e.annotation.forEach((function(e){var n=e[0],t=e[0]+e[1]-1,o="rgba(".concat(s.red,",").concat(s.green,",").concat(s.blue,",").concat(.2+.8*e[2],")");a[n]='<span class="entity-name" style="background: '.concat(o,'">').concat(a[n]),a[t]="".concat(a[t],"</span>")}));var o="<user>"===e.type?"user":"bot",i=!1;0===e.annotation.length&&(i=!0);var c=i?"last":"";return'<div class="'.concat(o," ").concat(c,'">').concat(a.join(""),"</div>")}var r=e.text.split(""),l=n;return e.annotation.forEach((function(e){var n=e[0],t=e[0]+e[1]-1,a="rgba(".concat(l.red,",").concat(l.green,",").concat(l.blue,",").concat(.2+.8*e[2],")");r[n]='<span class="background-token" style="background: '.concat(a,'">').concat(r[n]),r[t]="".concat(r[t],"</span>")})),'<div class="background-text">'.concat(r.join(""),"</div>")},tabButtonClicked:function(e){"background"===e?(this.backgroundTabClicked=!this.backgroundTabClicked,this.explainTabClicked=!1):(this.explainTabClicked=!this.explainTabClicked,this.backgroundTabClicked=!1)}}},S=P,$=(t("21bb"),Object(i["a"])(S,d,p,!1,null,null,null)),B=$.exports;a["a"].use(u["a"]);var I=new u["a"]({routes:[{path:"/",name:"home",component:B}]}),A=(t("456d"),t("75fc")),L=t("2f62");a["a"].use(L["a"]);var H=new L["a"].Store({state:{isLoggedIn:!1,nickName:"",messages:[{text:"Welcome to the chatbot. You can ask some questions if you want. Here is an example: Who is Michael Jordan?",from:"bot",isExcluded:!0}],explanations:[],background:[],backgroundText:[]},mutations:{logIn:function(e){e.isLoggedIn=!0},logOut:function(e){e.isLoggedIn=!1},setNickName:function(e,n){e.nickName=n},refreshMessages:function(e,n){var t;e.messages.length=0,(t=e.messages).push.apply(t,Object(A["a"])(n))},addMessage:function(e,n){e.messages.push(n)},refreshBackground:function(e,n){var t;e.background.length=0,(t=e.background).push.apply(t,Object(A["a"])(n))},refreshBackgroundText:function(e,n){var t;e.backgroundText.length=0,(t=e.backgroundText).push.apply(t,Object(A["a"])(n))},refreshExplanations:function(e,n){var t;e.explanations.length=0,(t=e.explanations).push.apply(t,Object(A["a"])(n))}},actions:{fetchMessages:function(e){var n=e.commit,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{explain:!0},a=this.state.messages.filter((function(e){return!e.isExcluded})).map((function(e){return e.text})),s=this.state.messages.filter((function(e){return!e.isExcluded})).map((function(e){return"<".concat(e.from,">")})),o={utterances:a,explain:void 0===t.explain||t.explain,utterance_types:s},i="http://convqa.dfki.de/backend/ask";fetch(i,{method:"POST",headers:{Accept:"application/json; charset=UTF-8"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.log(e);for(var t=[],a=[],s=[],o=[],i=0;i<e.utterances.length;i+=1)t.push({text:e.utterances[i],from:e.utterance_types[i].slice(1,e.utterance_types[i].length-1)});e.explain&&(Object.keys(e.explanation_annotations.background).forEach((function(n){a.push(Object.assign(e.background[n],{annotation:e.explanation_annotations.background[n]},{link:n},{text:e.background[n].text}))})),e.explanation_annotations.utterances.forEach((function(n,t){s.push({utterance:e.utterances[t],annotation:n,type:e.utterance_types[t]})}))),e.background&&Object.keys(e.background).forEach((function(n){o.push(Object.assign(e.background[n],{link:n}))})),n("refreshMessages",t),n("refreshBackground",a),n("refreshBackgroundText",o),n("refreshExplanations",s)})).catch((function(e){console.log(e)}))}}}),G=t("9483");Object(G["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["a"].config.productionTip=!1,new a["a"]({router:I,store:H,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,n,t){"use strict";var a=t("e332"),s=t.n(a);s.a},"7a98":function(e,n,t){},c609:function(e,n,t){"use strict";var a=t("5452"),s=t.n(a);s.a},d7d6:function(e,n,t){"use strict";var a=t("3d08"),s=t.n(a);s.a},e332:function(e,n,t){}});
//# sourceMappingURL=app.bf2f96fa.js.map