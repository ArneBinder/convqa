(function(e){function t(t){for(var a,r,i=t[0],c=t[1],u=t[2],d=0,g=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&g.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(g.length)g.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},s={app:0},o=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"21bb":function(e,t,n){"use strict";var a=n("7a98"),s=n.n(a);s.a},"3d08":function(e,t,n){},5452:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}}),n("router-view")],1)},o=[],r=(n("5c0b"),n("2877")),i={},c=Object(r["a"])(i,s,o,!1,null,null,null),u=c.exports,l=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e.loggedIn?e._e():n("login-box"),e.loggedIn?n("div",{staticClass:"chatbot-wrapper",class:{expanded:e.explainTabClicked}},[n("h3",{staticClass:"title"},[e._v("Hello, "+e._s(e.$store.state.nickName))]),n("span",{staticClass:"button explain",class:{expanded:e.explainTabClicked},on:{click:function(t){e.explainTabClicked=!e.explainTabClicked}}},[e._v("Explain")]),n("div",{staticClass:"message-panel"},e._l(this.$store.state.messages,(function(e,t){return n("message-box",{key:t,attrs:{message:e.text,type:e.from}})})),1),n("div",{staticClass:"user-message-wrapper"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],attrs:{id:"user-text"},domProps:{value:e.userMessage},on:{input:function(t){t.target.composing||(e.userMessage=t.target.value)}}}),n("span",{staticClass:"user-text-submit",on:{click:e.submitMessage}},[e._v("Send")])])]):e._e(),e.loggedIn?n("div",{staticClass:"explanation-window",class:{expanded:e.explainTabClicked}},[n("div",{staticClass:"background"},[n("h2",{staticClass:"section-title"},[e._v("Background")]),e._l(e.background,(function(t,a){return n("span",{key:a,staticClass:"entity-name",on:{click:function(n){return e.setBackgroundKnowledge(t)}}},[e._v(e._s(t.rawName))])}))],2),n("div",{staticClass:"explanation"},[n("h2",[e._v("Explanations")]),e._l(e.explanations,(function(t,a){return n("div",{key:a,staticClass:"utterance"},[n("div",{domProps:{innerHTML:e._s(e.setMessageGradient(t))}})])}))],2),e.backgroundShown?n("div",{staticClass:"background-modal"},[n("span",{staticClass:"close",on:{click:function(t){e.backgroundShown=!1}}},[e._v("X")]),n("div",{staticClass:"background-content"},[n("h3",[e._v(e._s(e.backgroundContent.rawName)),n("span",{staticClass:"type"},[e._v(e._s(e.backgroundContent.type))])]),n("div",{staticClass:"background-text"},[e._v(e._s(e.backgroundContent.text))]),n("div",{staticClass:"domain"},[e._v("Domains: "+e._s(e.backgroundContent.domains.join(", ")))]),n("div",{staticClass:"wiki-page"},[e._v("Wiki Page:\n          "),n("a",{attrs:{href:e.backgroundContent.link,target:"_blank"}},[e._v("link")])])])]):e._e()]):e._e()],1)},g=[],p=(n("ac6a"),n("28a5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-box"},[n("label",{attrs:{for:"user-nick-name"}},[e._v("Please enter your nick name:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickName,expression:"nickName"}],attrs:{id:"user-nick-name"},domProps:{value:e.nickName},on:{input:function(t){t.target.composing||(e.nickName=t.target.value)}}}),n("span",{staticClass:"button",on:{click:e.logIn}},[e._v("Start")])])}),f=[],m={name:"LoginBox",data:function(){return{nickName:""}},methods:{logIn:function(){this.$store.commit("logIn"),this.$store.commit("setNickName",this.nickName)}}},h=m,b=(n("c609"),Object(r["a"])(h,p,f,!1,null,"f1d64250",null)),v=b.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-box",class:e.type},[n("div",{staticClass:"message"},[e._v(e._s(e.message))])])},x=[],_={name:"MessageBox",props:{message:String,type:String}},y=_,C=(n("d7d6"),Object(r["a"])(y,k,x,!1,null,"796a72a6",null)),w=C.exports,M={name:"home",components:{LoginBox:v,MessageBox:w},computed:{loggedIn:function(){return this.$store.state.isLoggedIn}},data:function(){return{userMessage:"",explainTabClicked:!1,background:this.$store.state.background,explanations:this.$store.state.explanations,backgroundShown:!1,backgroundContent:{}}},methods:{submitMessage:function(){""!==this.userMessage&&this.$store.commit("addMessage",{text:this.userMessage,from:"user"}),this.userMessage="",this.$store.dispatch("fetchMessages")},setBackgroundKnowledge:function(e){Object.assign(this.backgroundContent,e),console.log(this.backgroundContent),this.backgroundShown=!0},setMessageGradient:function(e){console.log(e);var t={red:204,green:76,blue:88},n={red:79,green:76,blue:77},a=e.utterance.split(""),s="<user>"===e.type?n:t;e.annotation.forEach((function(e){var t=e[0],n=e[0]+e[1]-1,o="rgba(".concat(s.red,",").concat(s.green,",").concat(s.blue,",").concat(.2+.8*e[2],")");a[t]='<span class="entity-name" style="background: '.concat(o,'">').concat(a[t]),a[n]="".concat(a[n],"</span>")}));var o="<user>"===e.type?"user":"bot",r=!1;0===e.annotation.length&&(r=!0);var i=r?"last":"";return'<div class="'.concat(o," ").concat(i,'">').concat(a.join(""),"</div>")}}},j=M,O=(n("21bb"),Object(r["a"])(j,d,g,!1,null,null,null)),N=O.exports;a["a"].use(l["a"]);var S=new l["a"]({routes:[{path:"/",name:"home",component:N}]}),E=(n("456d"),n("75fc")),$=n("2f62");a["a"].use($["a"]);var P=new $["a"].Store({state:{isLoggedIn:!1,nickName:"",messages:[{text:"Welcome to the chatbot. You can ask some questions if you want. Here is an example: Who is Michael Jordan?",from:"bot",isExcluded:!0}],explanations:[],background:[]},mutations:{logIn:function(e){e.isLoggedIn=!0},logOut:function(e){e.isLoggedIn=!1},setNickName:function(e,t){e.nickName=t},refreshMessages:function(e,t){var n;e.messages.length=0,(n=e.messages).push.apply(n,Object(E["a"])(t))},addMessage:function(e,t){e.messages.push(t)},refreshBackground:function(e,t){var n;e.background.length=0,(n=e.background).push.apply(n,Object(E["a"])(t))},refreshExplanations:function(e,t){var n;e.explanations.length=0,(n=e.explanations).push.apply(n,Object(E["a"])(t))}},actions:{fetchMessages:function(){var e=this,t=this.state.messages.filter((function(e){return!e.isExcluded})).map((function(e){return e.text})),n=this.state.messages.filter((function(e){return!e.isExcluded})).map((function(e){return"<".concat(e.from,">")})),a={utterances:t,explain:!0,utterance_types:n},s="http://convqa.dfki.de/backend/ask";fetch(s,{method:"POST",headers:{Accept:"application/json; charset=UTF-8"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){console.log(t);for(var n=[],a=[],s=[],o=0;o<t.utterances.length;o+=1)n.push({text:t.utterances[o],from:t.utterance_types[o].slice(1,t.utterance_types[o].length-1)});Object.keys(t.explanation_annotations.background).forEach((function(e){a.push(Object.assign(t.background[e],{annotation:t.explanation_annotations.background[e]},{link:e}))})),t.explanation_annotations.utterances.forEach((function(e,n){s.push({utterance:t.utterances[n],annotation:e,type:t.utterance_types[n]})})),e.commit("refreshMessages",n),e.commit("refreshBackground",a),e.commit("refreshExplanations",s)})).catch((function(e){console.log(e)}))}}}),I=n("9483");Object(I["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["a"].config.productionTip=!1,new a["a"]({router:S,store:P,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("e332"),s=n.n(a);s.a},"7a98":function(e,t,n){},c609:function(e,t,n){"use strict";var a=n("5452"),s=n.n(a);s.a},d7d6:function(e,t,n){"use strict";var a=n("3d08"),s=n.n(a);s.a},e332:function(e,t,n){}});
//# sourceMappingURL=app.5b5af7d7.js.map